function formatPriceString(e){var s=parseFloat(e);return isNaN(s)?"Amount Invalid":s<=0?"Free":s>=5e3?"No Limit":Math.round(s).toString()+" kr."}function initMap(){mapEvent=new google.maps.Map(document.getElementById("sampleEventMap"),{zoom:14,center:{lat:55.7,lng:12.475}}),new google.maps.Marker({map:mapEvent})}function randomIntRange(e,s){return Math.floor(Math.random()*(s-e+1))+e}function scrollAll(e){var s=$(window).scrollTop(),a=$(window).height(),t=s,i=t+a,n=(e.outerHeight()-e.innerHeight())/2,o=e.offset().top+n,r=o+e.innerHeight();e.innerHeight()>a?$("html,body").animate({scrollTop:o,easing:"ease"},999):t>o?$("html,body").animate({scrollTop:o,easing:"ease"},999):i<r&&$("html,body").animate({scrollTop:r-a+n,easing:"ease"},999)}function scrollTop(e,s){if(void 0===s)s={};var a=parseFloat(s.percentFromTop),t=parseFloat(s.scrollSpeed);t||(t=999);$(window).scrollTop();var i=e.offset().top;a&&((a=Math.abs(a))>1&&(a/=100),i-=window.innerHeight*a),$("html,body").animate({scrollTop:i,easing:"ease-out"},t)}function doSignIn(){var e=$("div#signIn div.containerFeedback");e.html("");var s=$('input[name="signInEmail"]').val();s.match(/@/i)?(e.html("YOU&rsquo;RE IN!"),s.match(/admin/i)?$(".adminOnly").addClass("show").slideDown(666):$(".adminOnly").removeClass("show").hide(),$("nav.global .showSignIn").hide(),$("nav.global .signOut").show(),toggleObjectSlide($("div.containerPopup.signIn"))):e.html("That&rsquo;s not quite right. Try again?")}function toggleObjectSlide(e){"none"==e.css("display")?e.stop().slideDown(666,"easeOutBounce"):e.stop().slideUp(333,"easeInSine")}function showPage(e,s){aNavItems.each(function(){$(this).attr("data-page-id")==e?$(this).addClass("selected"):$(this).removeClass("selected")}),aPages.each(function(){$(this).attr("data-page-id")==e?($(this).addClass("selected"),sessionStorage.currentPageId=e):$(this).removeClass("selected")}),google.maps.event.trigger(mapEvent,"resize")}function showDataLoadMessage(){var e=randomIntRange(111,1111);$("div#systemLockMessageContainer").fadeIn(333),setTimeout(function(){$("div#systemLockMessageContainer").fadeOut(111)},e)}function showUserMessage(e,s){if(void 0===s)s=!1;var a=$("<div/>").html(e).hide();s&&a.addClass("error"),$("div#userMessageContainer").append(a),a.slideDown(666),setTimeout(function(){a.slideUp(999)},5e3)}function convertSliderDateValue(e){switch(e){case 0:return"Today";case 1:return"Tomorow";case 2:return"1 week from now";case 3:return"2 weeks from now";case 4:return"1 month from now";case 5:return"2 months from now";case 6:return"3 months from now";case 7:return"6 months from now";case 8:return"9 months from now";case 9:return"1 year from now"}return"No Limit"}var mapEvent=null,aNavItems=$("nav.global .navItem"),aPages=$("div.containerPages div.page"),iMaxEventPriceRange=5e3;$("div.filter div.filterSlider.priceRange").slider({range:!0,min:0,max:iMaxEventPriceRange,values:[0,iMaxEventPriceRange],step:100,slide:function(e,s){var a=formatPriceString(s.values[0]),t=formatPriceString(s.values[1]);$(this).closest("div.sliderGroup").find("span.sliderValueMin").html(a),$(this).closest("div.sliderGroup").find("span.sliderValueMax").html(t),showDataLoadMessage()}}).data("ui-slider")._slide(),$("div.filter div.filterSlider.dateRange").slider({range:!0,min:0,max:10,values:[0,10],step:1,slide:function(e,s){var a=convertSliderDateValue(s.values[0]),t=convertSliderDateValue(s.values[1]);$(this).closest("div.sliderGroup").find("span.sliderValueMin").html(a),$(this).closest("div.sliderGroup").find("span.sliderValueMax").html(t),showDataLoadMessage()}}).data("ui-slider")._slide();var sCurrentPageId=null;try{sCurrentPageId=sessionStorage.currentPageId}catch(e){}initMap(),$("input.editDate").datepicker({dateFormat:"DD, d MM, yy"}),showPage(sCurrentPageId||"eventBrowser"),document.addEventListener("click",function(e){var s=$(e.target).closest(".button, .clickLink");if(1==s.length)if(s.hasClass("toggleGlobalNav"))toggleObjectSlide($("header nav.global"));else if(s.hasClass("showSignIn"))toggleObjectSlide($("div.containerPopup.signIn"));else if(s.hasClass("signOut"))location.reload();else if(s.hasClass("navItem")){showPage(s.attr("data-page-id"))}else if(s.hasClass("showEventBrowser"))showPage("eventBrowser");else if(s.hasClass("deleteEvent"))confirm("Are you certain you want to delete this event?")&&(showPage("eventBrowser"),showUserMessage("The event has been deleted."));else if(s.hasClass("showEventDetail"))showPage("eventDetail"),scrollAll($("div.page div.eventDetail"));else if(s.hasClass("editEvent"))showPage("eventEdit"),scrollTop($("div.page div.eventEdit div.section.statistics"));else if(s.hasClass("addEvent"))showPage("eventEdit"),scrollTop($("div.page div.eventEdit div.section.statistics"));else if(s.hasClass("showEventStatistics"))showPage("eventReport");else if(s.hasClass("eventRemindMe"))showUserMessage("Your reminder has been added!");else if(s.hasClass("showRegisterForm"))toggleObjectSlide($("div.containerPopup.register"));else if(s.hasClass("submitRegister"))toggleObjectSlide($(s).closest("div.containerPopup")),showUserMessage("You&rsquo;re all set. Thanks for registering.");else if(s.hasClass("shareEvent"))showUserMessage("Oh no! Sorry, the social share feature isn't working right now.",!0);else if(s.hasClass("closePopup"))toggleObjectSlide($(s).closest("div.containerPopup"));else if(s.hasClass("submitSignIn"))doSignIn();else if(s.hasClass("filterChoice"))s.hasClass("selected")?s.removeClass("selected"):s.addClass("selected"),showDataLoadMessage();else if(s.hasClass("filterToggleExpand")){var a=s.attr("data-item-id"),t=s.closest("div.expandGroup").find("div[data-item-id="+a+"].filterContent"),i="none"==t.css("display")?"180deg":"0deg";t.slideToggle(444),t.parent().find(".actionIndicator").eq(0).css({transform:"rotate("+i+")"})}else s.hasClass("showCalendarForm")?toggleObjectSlide($("div.containerPopup.calendar")):s.hasClass("submitCalendar")?(toggleObjectSlide($(s).closest("div.containerPopup")),showUserMessage("Glad you&rsquo;re planning ahead ;)")):console.log("BUTTON CLICK WITH NO MATCH FOR:",s.attr("class"))});